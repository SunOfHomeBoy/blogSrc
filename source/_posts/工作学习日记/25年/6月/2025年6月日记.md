---
title: 2025年6月日记
date: 2025年6月3日 13:18:25
update: 
tags: 日记
categories: Diary
---

# 2025年6月3日 13:18:52 周二
  节后第一天

  + [python环境搭建](./python环境搭建.md)


  + [三步恢复肝脏](./三步恢复肝脏.md)
    1. 戒糖(饮料、水果、各种含糖零食)
    2. 轻断食(晚上不吃饭！不管自己多么痛苦)
    3. 适量运动(尽量骑自行车，周末爬山)

# 2025年6月6日 周五
  + Q: 我是一个程序员，从开发的角度来说。目前都有哪些最新的AI技术？

  + A: 从开发者的角度来看，目前最新的AI技术主要集中在以下几个领域：
    1. 大语言模型（LLM）
      - GPT系列、LLaMA、PaLM等
      - 支持长上下文理解、多轮对话
      - 代码生成和解释能力
      - 应用：智能助手、代码补全、文档生成
    2. 多模态AI
      - 文本、图像、音频、视频的联合理解
      - CLIP、Stable Diffusion等模型
      - 应用：图像生成、视频理解、跨模态搜索
    3. 生成式AI
      - 文本生成：ChatGPT、Bard
      - 图像生成：DALL-E、Midjourney
      - 视频生成：Runway、Pika
      - 应用：内容创作、设计辅助
    4. 强化学习
      - AlphaGo、AlphaZero等
      - 应用：游戏AI、机器人控制、资源优化
    5. 边缘AI
      - 在设备端运行的轻量级模型
      - TensorFlow Lite、Core ML
      - 应用：移动端AI、物联网设备
    6. AI开发工具
      - LangChain：构建LLM应用
      - Hugging Face：模型库和工具
      - PyTorch 2.0：动态图优化
      - JAX：高性能数值计算
    7. AI安全与伦理
      - 模型解释性
      - 数据隐私保护
      - 对抗性攻击防御
    8. AI基础设施
      - 分布式训练框架
      - 模型压缩与量化
      - 高性能推理引擎
    9. 领域专用AI
      - 生物医药：蛋白质结构预测
      - 金融：风险预测、交易策略
      - 教育：个性化学习
    10. AI与区块链结合
      - 去中心化AI
      - 数据市场
      - 模型验证

    - 对于开发者来说，建议关注：
      1. 掌握主流AI框架（PyTorch、TensorFlow）
      2. 学习Prompt Engineering
      3. 了解模型微调和部署
      4. 关注AI安全与伦理
      5. 探索AI在新领域的应用

    这些技术正在快速发展，为开发者提供了广阔的机会和挑战。

  + 解决 ollama wsl 访问问题
    ```powershell
      $env:OLLAMA_HOST = "http://0.0.0.0:11434"
      ollama serve
    ```

    ```wsl.Ubuntu.sh
    ip route | grep default
      default via 172.27.176.1 dev eth0 proto kernel

    curl http://172.27.176.1:11434/api/tags
    ```

  + 下周工作计划
    + STT & TTS 代理接口开发
    + 解决 浏览器 https 跨域，跨协议 问题
    + 服务的 增加 接口报错日志记录
    + 数字人播报接口业务逻辑开发
    + 数据 和 话术 给到大模型，大模型进行自然语言处理
    + 数字人问题回答 接口业务逻辑开发

# 2025年6月9日 周一
  ## Ubuntu 安装docker
  以下是 ​​Ubuntu 系统更换清华大学镜像源（含 Docker 仓库）的完整步骤​​，结合网络优化和常见问题修复：

  + ​​一、更换 Ubuntu 系统镜像源​​
    +  步骤 1：备份原有源文件​​
      > sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak

    + ​​步骤 2：配置清华源​​
      ```sh
      # 清空旧配置（适用于 Ubuntu 20.04，其他版本替换 focal 为对应代号）
      > sudo sed -i 's@http://.*archive.ubuntu.com@https://mirrors.tuna.tsinghua.edu.cn@g' /etc/apt/sources.list
      > sudo sed -i 's@http://.*security.ubuntu.com@https://mirrors.tuna.tsinghua.edu.cn@g' /etc/apt/sources.list

      # 或手动写入（推荐）
      echo -e "deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\n\
      deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\n\
      deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\n\
      deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\n\
      deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\n\
      deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\n\
      deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse\n\
      deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse" | sudo tee /etc/apt/sources.list
      ```

    + ​​步骤 3：更新软件列表​​
      > sudo apt update && sudo apt upgrade -y

  + 二、配置 Docker 清华镜像源​​
    + ​​步骤 1：备份原有 Docker 源​​
      > sudo mkdir -p /etc/apt/sources.list.d/docker.backup
      > sudo mv /etc/apt/sources.list.d/docker.list* /etc/apt/sources.list.d/docker.backup/
    + ​​步骤 2：添加清华 Docker 仓库​​
      ```sh
      # 导入 GPG 密钥（清华镜像站提供）
      > sudo mkdir -p /usr/share/keyrings
      > sudo curl -fsSL https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
      
      # 写入仓库配置
      echo \
        "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] \
        https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \
        focal stable" | \
        sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
      ​​步骤 3：更新并安装 Docker​​
      sudo apt update
      sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
      ```

  + ​​三、验证配置​
    + 1. 检查镜像源生效​​
      ```sh
      grep -A 3 "docker" /etc/apt/sources.list.d/docker.list
      预期输出：
      deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu focal stable
      ```
    ​​+ 2. 测试 Docker 安装​​
      > sudo systemctl start docker
      > sudo docker run hello-world  # 输出 "Hello from Docker!" 表示成功

  ## docker 运行 emoti-voice:v2
    > docker run -p 6005:6005 emoti-voice:v2

    > http://192.168.0.160:6005/docs
    > http://127.0.0.1:6005/docs // 本地回环网络

  ## 语音播报事件测试

  ## 接口报错log日志测试
    TTS Error
    > 2025-06-09 18:24:18,776 - ERROR - [2025-06-09 18:24:18.775836] TTS Error - Server returned error: Internal server error. Please check the logs for details.

# 2025年6月10日 周二
  我准备在 Ubuntu 服务器上部署 ollama docker镜像。
  但是 Ubuntu上 VPN不稳定，拉取失败。
  所以我准备 在 win11 上的 docker desktop 容器中 拉取 ollama docker 镜像，并在 Ubuntu 服务器上部署。
  请你给出具体方案
  所有系统 都是 x86_64 架构

  首先，请你用中文交流。
  其次，我想知道 如何搜索 ollama 的 docker 镜像。我想在 win11 docker desktop 上的 wsl Ubuntu 20.04 上拉取，然后 部署到我的 Ubuntu 服务器上。
  都是x86_64 架构

  + Ollama Docker 镜像打包
    1. 找到官方镜像
      > docker pull ollama/ollama:latest

    2. 本地运行 ollama/ollama:latest 镜像
      > docker run -d --name ollama_container -p 11434:11434 ollama/ollama:latest

    3. 检查 ollama 服务是否正常运行
      ```sh
      > docker run -d --name ollama_container -p 11434:11434 ollama/ollama:latest
      a09fee1963dfcfae27a470a4e883084e8caf3354ab66ffcd0dc6ff21b5d6f999
      > ollama -h
      ollama: command not found
      > docker ps
      CONTAINER ID   IMAGE                  COMMAND               CREATED          STATUS          PORTS                                             NAMES
      a09fee1963df   ollama/ollama:latest   "/bin/ollama serve"   53 seconds ago   Up 53 seconds   0.0.0.0:11434->11434/tcp, [::]:11434->11434/tcp   ollama_container
      ```
    4. 通过`浏览器` | `命令行`与 Ollama 交互
      + 4.1 访问本地 API 接口
        `http://172.27.176.1:11434/`
        `http://127.0.0.1:11434/api/tags`
      + 4.2 使用命令行操作 Ollama
        ```bash
        > docker exec -it ollama_container sh
        # ollama pull qwen3:32b
        7MB/s
        ```
        **等待 拉取模型文件**
    5. ollama 本地Docker镜像 打包
      - 基础信息
      ```sh
        > docker run -d --name ollama_container -p 11434:11434 ollama/ollama:latest
          a09fee1963dfcfae27a470a4e883084e8caf3354ab66ffcd0dc6ff21b5d6f999

        > docker ps
        CONTAINER ID   IMAGE                  COMMAND               CREATED       STATUS       PORTS                                             NAMES
        a09fee1963df   ollama/ollama:latest   "/bin/ollama serve"   2 hours ago   Up 2 hours   0.0.0.0:11434->11434/tcp, [::]:11434->11434/tcp   ollama_container

        > docker exec -it ollama_container sh
        # ollama list
        NAME         ID              SIZE     MODIFIED
        qwen3:32b    030ee887880f    20 GB    21 minutes ago
      ```

      1. 将容器提交为新镜像
        > docker commit ollama_container ollama_qwen3_32b_container

      2. 导出镜像 为 tar 文件：
        如果您需要将这个镜像传输到其他服务器或环境，您可以导出为 tar 文件并在目标环境中加载：

        > docker save -o ollama_qwen3_32b_container.tar ollama_qwen3_32b_container

    6. 目标服务器 copy镜像：
      
    7. 目标服务器 加载镜像：
      > docker load -i ollama_qwen3_32b_container.tar

    8. 服务器本地运行 ollama_qwen3_32b_container 镜像
      > docker run -d --name ollama_container -p 11434:11434 ollama_qwen3_32b_container

    * 
      <!-- > docker tag ollama/ollama:latest ollama:latest -->

  + 数字人Agent 打包部署测试

  + 安装 Nginx

  ## 优化
    1. 流式响应
    2. 音频队列
    3. 音频ws接口

  ## 钉钉工作日志
    + 调试 服务器
      + 安装并调试 Todesk、SSH 链接工具
      + 配置远程 唤醒服务器功能
    + 安装 VPN
    + 安装 docker
      + 部署 emoti-voice:v2 STT & TTS Docker包
      + 测试功能
    + 安装 ollama
      + VPN 问题，导致 下载总是出错
    + 编写 STT & TTS 服务，请求代理接口，并增加 log日志记录
      + 根据 服务返回错误日志，增加 拦截规则
