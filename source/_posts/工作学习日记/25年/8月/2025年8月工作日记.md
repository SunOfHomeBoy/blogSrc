<!--
 * @Description:
 * @Date: 2025-08-11 15:44:35
 * @LastEditTime: 2025-08-29 10:32:45
 * @FilePath: \blogSrc\source\_posts\工作学习日记\25年\8月\2025年8月工作日记.md
-->
# 2025年8月4日 周一
  + 山东大脑接口联调
    ```prompt
      参考 159-288 行代码。根据接口返回值，处理 `重点时段分级事件分析 KeyTimeClassificationIncidentAnalysis.vue` 组件，数据渲染，完成 数据处理方法逻辑 */
    ```
  + AI智能体能力
    1. 交互界面
      1. 数字人形象
      2. 文字交互窗口
      3. 语音交互功能
      4. 思考链(展示大模型思考过程)
      5. 重新回答
      6. 提前结束思考
      7. 停止回答(结束数字人语音播报)
    2. 配置界面
      1. 切换大模型
      2. 切换数字人形象
      3. 切换数字人声音
      4. 调整智能体性格(回答时 语气、严禁程度)
      5. 管理日志
      6. 导出||一键上报，智能体运行异常日志
      7. 管理 大模型通讯连接器
      8. 配置 业务接口调用服务
    3. 工作流界面
      1. 配置工作流
        - 定义工作流名称与描述
        - 设置工作流触发条件（如定时任务、事件驱动等）
        - 指定工作流执行环境和权限配置
      2. 选择工作流类型
        - 顺序执行型：按步骤依次执行任务
        - 并行处理型：多个任务同时进行，提高效率
        - 条件分支型：根据判断条件决定执行路径
        - 循环迭代型：重复执行某一流程直到满足退出条件
      3. 配置提示词
        - 编写每个节点的输入提示词，引导大模型生成预期输出
        - 支持动态变量插入，增强提示词灵活性
        - 提供提示词版本管理功能，便于迭代优化
      4. 细化业务流程
        - 绘制流程图可视化展示各节点关系
        - 定义节点间的数据传递方式与格式
        - 设定异常处理机制，确保流程稳定运行
        - 添加人工审核节点，支持人机协同操作
      5. 配置数据源接口
        - 连接外部数据库或API获取实时数据
        - 配置数据清洗与预处理规则
        - 实现数据缓存机制以提升访问速度
        - 设置接口调用频率限制与错误重试策略
      6. 生成FunctionCall函数
        - 自动解析业务逻辑并生成对应的函数调用代码
        - 支持多种编程语言的函数模板
        - 提供函数测试工具，验证生成结果正确性
        - 管理函数依赖库，简化部署流程
      7. 加入智能体工作流
        - 将生成的工作流集成到智能体中，实现自动化执行
        - 监控工作流运行状态，记录关键指标
        - 提供日志追踪功能，方便问题排查
        - 支持手动干预与调整，保证流程可控性
    4. 工作流界面
      1. 建工作流
        登录后点 “新建”，选模板，填名称进编辑器。
      2. 配节点
        选择 “AI 模型”，写提示词。
        选择 “条件分支” 连线，设判断条件和跳转节点。
        选择 “API 调用” 到分支，填接口信息，用 {{变量}} 绑数据。
        选择 “数字人输出” 到末尾，选形式，绑结果变量。
      3. 测试上线
        点 “试运行”，输内容测流程，改问题重测。
        测通后点 “发布”，获 ID 和版本号。
      4. 接数字人系统
        拿对接 API 和密钥。
        复制代码到数字人系统，测通即可。

  + 石太项目(@肖坤)

# 2025年8月5日 周二
  + AI数字人 对接工作
    + IP:port/AI数字人前端接入文档.docx
    + 服务地址: https://14.78.1.86/
    + 前端地址: https://14.78.1.86/index.html
    + 文档地址: https://14.78.1.86/AI数字人前端接入文档.docx
      + 文档里面 host地址 与 当前访问地址一致
  + XiaoShi
    + Gitlab账号
      + 903317164@qq.com
      + sc123456
    + 石太
      + lishichen
      + Xiaoshi666@

# 2025年8月7日 周四
  + 石太高速
    + Codebuddy 问题
      + www仓库，一改代码，就掉git，扫描不到仓库。。。
        + 大模型改变了 .git 文件夹名称为 .git_disable
      + 没有diff页面
    + 处理 数智人 icon按钮拖拽逻辑
    + 分级分类管理 -> 事件工作台
    + 从 EPSG:4326 (WGS84) 转换到 EPSG:3857 (Web Mercator):
      > ol.proj.fromLonLat([longitude, latitude])
    + 从 EPSG:3857 (Web Mercator) 转换回 EPSG:4326 (WGS84):
      > ol.proj.toLonLat(coordinate)
    + 2.3.2.1 > b需求 参考 综合事件管理 卡片 地图跳转逻辑

# 2025年8月9日 周六
  + 石太高速
    + 情报板 开发

# 2025年8月11日 周一
  + 石太高速清单
    + 1.6.2.2 事件工作台（已完成部分）
      + 搜索条件修改
      + 地图定位(icon 图标)
        + ![产品确认中](image-3.png)

    + 1.6.2(已完成)
      + 处置、详情视频（实时、历史）(已完成)
        + 视频框(摄像头、距离)
        + 视频、图片链接
      + ![alt text](image-2.png)
        + 时间类型 下拉框 待修复
        + 视频图片上传 待修复
    + 1.6.1 预警事件接入（等接口）（已完成）
      + 同步按钮
        + shitai-child-event\src\views\EventWarning\index.vue
        + 没有接口
        + 列表调整(getTableData())

    + UI-石太设备图标
      + /shitai-monitor/synthetical（另一个页面）
    + 气象站图层
    + 事件分类图标（UI风格待确认）
      + 事件工作台
      +
    + 事件级别显示

# 2025年8月12日 周二

# 2025年8月13日 周三
  ![石太高速工作量对比](image-4.png)

# 2025年8月14日 周四
  + 实现 气象站 右侧按钮
    + 找到对应图标
    + key命名

# 2025年8月18日 周一
  + 配置自动同步
  + 气象站 ws请求


  1. 综合运行监测
     1. 恢复成原来地图入口（已提交）
     2. 使用 OpenLayer 替代 高德地图
     3. 保留原来 高德地图 右侧图层控制的功能逻辑，使用 OL的api 重新实现一版
     4. [收费站，服务区，隧道，桥梁，摄像机，气象监测设备，情报板] 和 事件工作台功能保持一致。(待确认@肖坤)


# 2025年8月20日 周三
  + 数字人智能体服务器
    ```bash
      # Docker 容器列表
      CONTAINER ID   IMAGE                        COMMAND                   CREATED        STATUS                      PORTS                                                                                                                                                                                                                                                                                                                                                                        NAMES
      d2c3ddf08549   wvp-wvp:latest               "/bin/sh -c 'java -j…"   7 days ago     Exited (143) 7 days ago                                                                                                                                                                                                                                                                                                                                                                                  wp
      f228444bbc3f   89e876ac9dd2                 "sh -c './MediaServe…"   7 days ago     Up 7 days                   0.0.0.0:8000->8000/udp, [::]:8000->8000/udp, 0.0.0.0:9000->9000/udp, [::]:9000->9000/udp, 0.0.0.0:10000->10000/udp, [::]:10000->10000/udp, 0.0.0.0:10000->10000/tcp, [::]:10000->10000/tcp, 0.0.0.0:18080->80/tcp, [::]:18080->80/tcp, 0.0.0.0:8443->443/tcp, [::]:8443->443/tcp, 0.0.0.0:8554->554/tcp, [::]:8554->554/tcp, 0.0.0.0:11935->1935/tcp, [::]:11935->1935/tcp   zlmediakit
      0afd3cf00d18   stt_tts_serve:v1             "python testV2.py"        2 months ago   Exited (0) 2 months ago                                                                                                                                                                                                                                                                                                                                                                                  STT_TTS_container_v2
      6f75266c3ebf   syq163_emoti_voice           "/bin/sh -c 'streaml…"   2 months ago   Exited (137) 2 months ago                                                                                                                                                                                                                                                                                                                                                                                recursing_diffie
      4ad9a0b3b9e8   digitalman                   "python ./main.py"        2 months ago   Up 2 weeks                  0.0.0.0:9880->9880/tcp, [::]:9880->9880/tcp                                                                                                                                                                                                                                                                                                                                  digitalman_container
      fbbe6318a1e3   stt_tts_serve:v1             "python testV2.py"        2 months ago   Up 2 weeks                  0.0.0.0:6005->6005/tcp, [::]:6005->6005/tcp, 8000/tcp                                                                                                                                                                                                                                                                                                                        STT_TTS_container
      dcf9a775ca0e   ollama_qwen3_32b_container   "/bin/ollama serve"       2 months ago   Up 2 weeks                  0.0.0.0:11434->11434/tcp, [::]:11434->11434/tcp                                                                                                                                                                                                                                                                                                                              ollama_container_GPU
    ```

  + [AI厂家](aimeta.huilan.com)

# 2025年8月21日 周四
  + 石太高速
    + [高温 能见度 大风]以外，其他模块 没有请求接口
    + [高温 能见度 大风] 弹窗没出来
    + 环境模块 没有 id字段

# 2025年8月23日 周六
  + 石太高速
    + 综合运行监测 地图
      1. 拥堵路段 道路渲染，根据参数，渲染对应颜色
      2. 地图 图层
        气象站、摄像机 问题调试
      3. 地图 icon替换，同步 事件工作台icon

# 2025年8月29日 周五
  + 数字人对接服务
    服务地址: https://14.78.1.86/
    前端地址: https://14.78.1.86/index.html
    文档地址: https://14.78.1.86/AI数字人前端接入文档.docx
    文档里面 host地址 与 当前访问地址一致

  + 检查 数字人 agent接口配置
    > docker exec -it digitalman_container bash
